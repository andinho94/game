<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE DRAMA OF THE GIFTED CHILD</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            image-rendering: pixelated;
        }
        
        body {
            font-family: 'Press Start 2P', cursive;
            background: #000;
            color: #fa0;
            overflow-x: hidden;
        }
        
        .game-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .game-container {
            width: 100%;
            max-width: 900px;
            background: #222;
            border: 8px solid #fa0;
            box-shadow: 0 0 40px rgba(255, 170, 0, 0.5);
            position: relative;
        }
        
        .crt-effect {
            pointer-events: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            z-index: 1000;
        }
        
        .screen {
            background: #000;
            padding: 20px;
            min-height: 600px;
        }
        
        .title {
            text-align: center;
            font-size: 16px;
            color: #fa0;
            text-shadow: 2px 2px #fc0;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            font-size: 8px;
            color: #fc0;
            margin-bottom: 20px;
        }
        
        .progress-header {
            background: #111;
            border: 4px solid #fa0;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .xp-bar-container {
            background: #333;
            border: 2px solid #fa0;
            height: 20px;
            margin-bottom: 10px;
            position: relative;
        }
        
        .xp-bar-fill {
            background: linear-gradient(90deg, #fa0 0%, #fc0 100%);
            height: 100%;
            transition: width 0.5s;
        }
        
        .xp-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 8px;
            color: #fff;
            text-shadow: 1px 1px #000;
        }
        
        .stats-row {
            display: flex;
            justify-content: space-around;
            font-size: 8px;
        }
        
        .stat-item {
            color: #fa0;
        }
        
        .stat-value {
            color: #fc0;
        }
        
        .skill-tree {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .skill-node {
            background: #1a001a;
            border: 4px solid #333;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            min-height: 120px;
        }
        
        .skill-node.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .skill-node.unlocked {
            border-color: #fa0;
        }
        
        .skill-node.unlocked:hover {
            background: #330033;
            transform: translateY(-3px);
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
        }
        
        .skill-node.completed {
            border-color: #fc0;
            background: #001a1a;
        }
        
        .skill-icon {
            font-size: 32px;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .skill-title {
            font-size: 8px;
            color: #fa0;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .skill-progress {
            font-size: 7px;
            color: #fc0;
            text-align: center;
        }
        
        .skill-lock {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 16px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            overflow-y: auto;
        }
        
        .modal.active {
            display: block;
        }
        
        .modal-content {
            background: #000;
            border: 8px solid #fa0;
            padding: 20px;
            max-width: 700px;
            margin: 20px auto;
        }
        
        .lesson-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .lesson-title {
            font-size: 14px;
            color: #fa0;
            margin-bottom: 10px;
        }
        
        .lesson-subtitle {
            font-size: 8px;
            color: #fc0;
        }
        
        .teaching-section {
            background: #1a001a;
            border: 2px solid #fa0;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .teaching-text {
            font-size: 9px;
            line-height: 1.8;
            color: #fa0;
            margin-bottom: 15px;
        }
        
        .key-concept {
            background: #000;
            border-left: 4px solid #fc0;
            padding: 10px;
            margin: 15px 0;
        }
        
        .concept-title {
            color: #fc0;
            font-size: 8px;
            margin-bottom: 8px;
        }
        
        .concept-text {
            color: #fa0;
            font-size: 8px;
            line-height: 1.6;
        }
        
        .question-section {
            background: #000;
            border: 4px solid #fa0;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .question-text {
            font-size: 10px;
            color: #fc0;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .answers {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .answer-btn {
            background: #330033;
            border: 4px solid #fa0;
            color: #fa0;
            padding: 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }
        
        .answer-btn:hover:not(.disabled) {
            background: #4d004d;
            border-color: #fc0;
            transform: translateX(5px);
        }
        
        .answer-btn.correct {
            background: #003300;
            border-color: #0f0;
            animation: correctPulse 0.5s;
        }
        
        .answer-btn.incorrect {
            background: #330000;
            border-color: #f00;
            animation: shake 0.5s;
        }
        
        .answer-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border: 2px solid #fa0;
            font-size: 8px;
            line-height: 1.6;
            display: none;
        }
        
        .feedback.correct {
            background: #001a00;
            border-color: #0f0;
            color: #0f0;
            display: block;
        }
        
        .feedback.incorrect {
            background: #1a0000;
            border-color: #f00;
            color: #f00;
            display: block;
        }
        
        .continue-btn {
            background: #330033;
            border: 4px solid #fa0;
            color: #fa0;
            padding: 12px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 9px;
            cursor: pointer;
            margin-top: 20px;
            float: right;
        }
        
        .continue-btn:hover {
            background: #4d004d;
            border-color: #fc0;
            color: #fc0;
        }
        
        .back-btn {
            background: #330000;
            border: 4px solid #f00;
            color: #f00;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            cursor: pointer;
            float: left;
        }
        
        .back-btn:hover {
            background: #550000;
            color: #ff0;
        }
        
        .completion-screen {
            text-align: center;
            padding: 40px 20px;
        }
        
        .completion-icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .completion-title {
            font-size: 16px;
            color: #fa0;
            margin-bottom: 20px;
        }
        
        .xp-earned {
            font-size: 12px;
            color: #fc0;
            margin-bottom: 30px;
        }

        .level-indicator {
            background: #000;
            border: 2px solid #fc0;
            padding: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .level-text {
            color: #fc0;
            font-size: 10px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-btn {
            flex: 1;
            background: #330033;
            border: 4px solid #fa0;
            color: #fa0;
            padding: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            cursor: pointer;
        }

        .nav-btn:hover {
            background: #4d004d;
            border-color: #fc0;
            color: #fc0;
        }

        .home-btn {
            background: #001a1a;
            border-color: #fc0;
            color: #fc0;
        }

        .home-btn:hover {
            background: #003333;
            border-color: #fa0;
            color: #fa0;
        }

        /* Keyboard focus improvements */
        .skill-node:focus {
            outline: 3px solid #fc0;
            outline-offset: 3px;
        }

        .answer-btn:focus,
        .continue-btn:focus,
        .back-btn:focus,
        .nav-btn:focus {
            outline: 2px solid #fc0;
            outline-offset: 2px;
        }

        /* Skill prerequisites tooltip */
        .skill-prereq {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 6px;
            color: #666;
            text-align: center;
        }

        .skill-node.locked .skill-prereq {
            color: #fa0;
        }

        /* Running score display */
        .score-tracker {
            background: #1a001a;
            border: 2px solid #fa0;
            padding: 10px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 8px;
            color: #fc0;
        }

        .score-value {
            color: #ff0;
            font-size: 10px;
        }

        /* Next skill button */
        .next-skill-btn {
            background: #330033;
            border: 4px solid #fa0;
            color: #fa0;
            padding: 12px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 9px;
            cursor: pointer;
            margin-top: 20px;
            animation: pulse 2s infinite;
        }

        .next-skill-btn:hover {
            background: #4d004d;
            border-color: #fc0;
            color: #fc0;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <div class="game-container">
            <div class="crt-effect"></div>
            <div class="screen">
                <div class="title">üé≠ THE DRAMA OF THE GIFTED CHILD üé≠</div>
                <div class="subtitle">ALICE MILLER ON THE FALSE SELF</div>
                
                <div class="progress-header">
                    <div class="xp-bar-container">
                        <div class="xp-bar-fill" id="xp-bar"></div>
                        <div class="xp-text" id="xp-text">0 / 100 XP</div>
                    </div>
                    <div class="stats-row">
                        <div class="stat-item">LEVEL: <span class="stat-value" id="level-display">1</span></div>
                        <div class="stat-item">MASTERY: <span class="stat-value" id="mastery-display">0%</span></div>
                        <div class="stat-item">STREAK: <span class="stat-value" id="streak-display">0üî•</span></div>
                    </div>
                </div>

                <div class="level-indicator">
                    <div class="level-text">CURRENT PATH: <span id="current-path">FOUNDATIONS</span></div>
                </div>

                <div class="button-group">
                    <button class="nav-btn home-btn" onclick="window.location.href='learning-library-hub.html'">üè† HOME</button>
                    <button class="nav-btn" onclick="saveProgress()">üíæ SAVE</button>
                    <button class="nav-btn" onclick="loadProgress()">üìÅ LOAD</button>
                    <button class="nav-btn" onclick="resetProgress()">üîÑ RESET</button>
                </div>
                
                <div style="text-align: center; font-size: 6px; color: #666; margin-bottom: 15px;">
                    ‚å®Ô∏è SHORTCUTS: ESC=close ‚Ä¢ H=home ‚Ä¢ S=save ‚Ä¢ TAB=navigate
                </div>
                
                <div class="skill-tree" id="skill-tree"></div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="modal">
        <div class="modal-content" id="modal-content"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        let gameState = {
            level: 1,
            xp: 0,
            xpToNextLevel: 100,
            totalXp: 0,
            streak: 0,
            completedSkills: [],
            skillProgress: {},
            currentLesson: null,
            currentQuestion: 0,
            correctAnswers: 0
        };

const skillTree = [
    // LEVEL 1: FOUNDATIONS
    {
        id: 'false-self',
        title: 'The False Self',
        icon: 'üé≠',
        level: 1,
        xp: 20,
        prereq: null,
        lessons: [
            {
                title: 'Adaptation to Narcissistic Parents',
                teaching: `Alice Miller's core insight: The "GIFTED CHILD" develops FALSE SELF to meet parents' narcissistic needs, losing connection to TRUE SELF in the process.

"Gifted" doesn't mean intellectually talented - it means PERCEPTIVE, SENSITIVE child who can sense and adapt to parents' emotional needs. These children become expert at: reading parental moods, suppressing own needs, becoming what parents need them to be.

The price: disconnection from authentic feelings, desires, and self. Child learns: "My real self is unacceptable. I must be what they need to survive/be loved."`,
                concepts: [
                    {
                        title: 'Narcissistic Use of Child',
                        text: 'Parent uses child to regulate OWN emotional states, fulfill unmet needs, maintain self-esteem. Child exists to serve parent\'s psychological needs, not as separate person with own needs. This is subtle abuse - may look like "good parenting" from outside.'
                    },
                    {
                        title: 'The Adaptation',
                        text: 'Child develops: hypervigilance to others\' moods, compulsive caregiving, perfectionism, achievement orientation, emotional suppression. All aimed at: getting love by being what parent needs, avoiding rejection/abandonment, maintaining connection despite lack of true seeing.'
                    }
                ],
                questions: [
                    {
                        question: 'What does Miller mean by "gifted child"?',
                        answers: [
                            { text: 'High IQ or talented children', correct: false, feedback: 'No! "Gifted" means emotionally perceptive, able to sense and adapt to parents\' needs, not intellectual giftedness.' },
                            { text: 'Sensitive, perceptive child who adapts to narcissistic parents by developing false self to meet their needs', correct: true, feedback: 'EXACTLY! These children are "gifted" in their capacity to: read subtle emotional cues, suppress own needs, become what parents require. This emotional sensitivity becomes both survival skill AND source of later suffering. They sacrifice authentic self for connection.' },
                            { text: 'Children who receive many gifts', correct: false, feedback: 'Not literal gifts! "Gifted" refers to child\'s perceptiveness and adaptive capacity.' },
                            { text: 'Lucky children with good parents', correct: false, feedback: 'Opposite! These children have narcissistic parents who use them. The "gift" is child\'s sensitivity, which becomes burden.' }
                        ]
                    },
                    {
                        question: 'Client says: "My mother was wonderful - always proud of my achievements, showed me off to friends." What might Miller suspect?',
                        answers: [
                            { text: 'Sounds like healthy parenting', correct: false, feedback: 'Miller would question: Was mother proud of CHILD or proud of HERSELF through child? Was child seen as separate person or extension of mother\'s narcissism?' },
                            { text: 'Possible narcissistic use - mother basking in child\'s achievements for her own self-esteem rather than genuinely seeing child', correct: true, feedback: 'MILLER\'S LENS! Questions: Did mother celebrate child\'s joy in achievement or HER pride in having accomplished child? Was child\'s worth contingent on achievements? What happened when child failed or wasn\'t impressive? Could child be mediocre and still loved? If child existed to make mother look/feel good, this is narcissistic use even if it looked like "proud parent."' },
                            { text: 'All parents are proud of achievements', correct: false, feedback: 'Difference: Healthy parent celebrates child\'s joy and growth. Narcissistic parent needs child\'s success for OWN self-esteem. Subtle but crucial difference.' },
                            { text: 'Client is ungrateful', correct: false, feedback: 'This misses the point! Child may FEEL they should be grateful (which increases guilt). But if they weren\'t truly SEEN, gratitude doesn\'t heal the wound.' }
                        ]
                    },
                    {
                        question: 'What is the "false self"?',
                        answers: [
                            { text: 'Lying about who you are', correct: false, feedback: 'Not conscious deception! False self develops unconsciously as adaptation. Child genuinely believes this is who they are.' },
                            { text: 'Persona developed to meet others\' needs/expectations while losing connection to authentic feelings, desires, and self', correct: true, feedback: 'YES! False self is: achievement-oriented, pleasing, responsible, perceptive to others, disconnected from own needs/feelings. Feels hollow, driven by "shoulds," lives for external validation. Person may be "successful" but feels empty because success serves false self, not true desires. Recovery requires: mourning loss of true self, feeling repressed emotions, discovering authentic wants.' },
                            { text: 'Having low self-esteem', correct: false, feedback: 'False self can appear HIGHLY successful and confident! The issue isn\'t low self-esteem but disconnection from authentic self.' },
                            { text: 'Pretending to be happy', correct: false, feedback: 'Bigger than affect management. False self is entire personality structure built around being what others need rather than authentic self.' }
                        ]
                    }
                ]
            }
        ]
    },
    {
        id: 'repressed-feelings',
        title: 'Repressed Feelings',
        icon: 'üîí',
        level: 1,
        xp: 25,
        prereq: 'false-self',
        lessons: [
            {
                title: 'The Price of Adaptation',
                teaching: `To maintain false self and parental connection, child must REPRESS authentic feelings - especially rage, grief, and neediness.

These feelings threaten the adaptation: Rage at being used/not seen ‚Üí but expressing anger risks losing parent. Grief at loss of true self ‚Üí but mourning means acknowledging what was lost. Neediness ‚Üí but parents couldn't tolerate child's genuine dependency.

Repression isn't conscious. Child doesn't think "I'll suppress this." Feelings simply become inaccessible. Adult doesn't know what they're feeling because they learned NOT to feel.`,
                concepts: [
                    {
                        title: 'Forbidden Feelings',
                        text: 'Narcissistic parents can\'t tolerate: child\'s anger (threatens parent), child\'s sadness (burdens parent), child\'s needs (parent has none to give). So child learns: these feelings are dangerous, unacceptable, must be hidden. Child may become "cheerful," "easy," "mature beyond years."'
                    },
                    {
                        title: 'Consequences of Repression',
                        text: 'Depression (rage turned inward), anxiety (unnamed feelings seeking expression), psychosomatic symptoms (body expressing what mind can\'t), compulsions/addictions (managing unfelt feelings), difficulty knowing what you want (lost connection to desires).'
                    }
                ],
                questions: [
                    {
                        question: 'Adult client reports: "I don\'t really get angry, I\'m pretty easygoing." From Miller\'s perspective, what might this suggest?',
                        answers: [
                            { text: 'They have healthy emotional regulation', correct: false, feedback: 'Miller would suspect: not absence of anger but REPRESSION of anger. "Easygoing" may be adaptation, not authentic temperament.' },
                            { text: 'Possible repression of rage - may have learned anger was dangerous/unacceptable as child, now disconnected from this feeling', correct: true, feedback: 'MILLER ALERT! "I don\'t get angry" often means: anger was forbidden in childhood (narcissistic parent couldn\'t tolerate it), child learned to suppress rage to maintain connection, adult now dissociated from anger. May present as: depression (anger turned inward), people-pleasing, passive-aggression, sudden explosions (when repression fails). Therapy explores: What happened when you expressed anger as child? Who couldn\'t tolerate your feelings? What do you fear would happen if you let yourself be angry now?' },
                            { text: 'They\'re lying', correct: false, feedback: 'Not lying! They genuinely may not FEEL anger because it\'s so deeply repressed. They believe they\'re "easygoing."' },
                            { text: 'Nothing - some people just aren\'t angry', correct: false, feedback: 'Miller would say: everyone has anger at being mistreated. If someone "never" feels it, question where it went, not whether it exists.' }
                        ]
                    },
                    {
                        question: 'What\'s the relationship between depression and repressed rage in Miller\'s theory?',
                        answers: [
                            { text: 'No relationship', correct: false, feedback: 'Miller sees depression as DIRECTLY related to repressed rage, especially rage at parents.' },
                            { text: 'Depression is rage turned inward - anger at being used/not seen that can\'t be directed at parents, so turns against self', correct: true, feedback: 'CORE MILLER CONCEPT! Depression = MOURNING + RAGE with nowhere to go. Person is enraged at: not being truly seen, having to sacrifice self, being used. But can\'t direct anger at parents (child\'s survival depended on connection). So rage turns inward: self-hatred, self-criticism, feeling worthless. Recovery requires: accessing and feeling the rage, directing it appropriately (at parent who failed them), mourning what was lost. This transforms depression into grief and eventually liberation.' },
                            { text: 'Depression causes you to get angry', correct: false, feedback: 'Reverse! Repressed anger (plus grief) creates depression.' },
                            { text: 'Depression is genetic, not about feelings', correct: false, feedback: 'Miller acknowledges biology but emphasizes: depression has MEANING, related to repressed emotional experience, especially from childhood.' }
                        ]
                    },
                    {
                        question: 'Client achieves great success but feels empty and depressed. Miller would explore:',
                        answers: [
                            { text: 'Why they\'re so ungrateful for their success', correct: false, feedback: 'Wrong lens! Miller would see emptiness as sign that success serves false self, not authentic desires.' },
                            { text: 'Whether success serves false self (parental expectations) rather than true self - achievement without authentic desire creates emptiness', correct: true, feedback: 'EXACTLY! Classic Miller scenario: Successful doctor/lawyer/executive who feels dead inside because: chose career to please parents (unconsciously), achievements feed false self but not true desires, success proves worth but doesn\'t fulfill authentic needs. Therapy explores: What did YOU want before learning what you "should" want? Who are you trying to please? What would you do if parents\' approval didn\'t matter? Healing requires: mourning lost authentic path, accessing true desires, potentially choosing differently even if it disappoints parents.' },
                            { text: 'They need to achieve more', correct: false, feedback: 'More achievement won\'t help if it\'s serving false self! Would just create more emptiness.' },
                            { text: 'They should be grateful', correct: false, feedback: 'Gratitude doesn\'t resolve the emptiness of living for others\' expectations rather than authentic self.' }
                        ]
                    }
                ]
            }
        ]
    },
    {
        id: 'depression-meaning',
        title: 'Depression\'s Meaning',
        icon: 'üåë',
        level: 1,
        xp: 25,
        prereq: 'repressed-feelings',
        lessons: [
            {
                title: 'Not Just Brain Chemistry',
                teaching: `Miller challenges purely biological view of depression. While neurochemistry is real, depression has MEANING - it's psyche's way of signaling: "You're living a false life."

Depression contains: 
- Repressed rage at being used/unseen
- Grief at loss of authentic self
- Protest against continued self-betrayal
- Body's refusal to continue false adaptation

Antidepressants may relieve symptoms but don't address: why person is depressed, what depression is trying to communicate, what needs to change.`,
                concepts: [
                    {
                        title: 'Depression as Signal',
                        text: 'Miller: depression says "something is deeply wrong with how you\'re living." Not defect to fix but message to hear. Person living authentically, connected to true self, expressing feelings, pursuing genuine desires - rarely chronically depressed. Depression signals disconnection from self.'
                    },
                    {
                        title: 'The Work of Depression',
                        text: 'Recovery isn\'t "feeling better" but: feeling the repressed rage, mourning the lost authentic self, recognizing parental failures, choosing authentic life even if it means loss (of parental approval, false success, adaptive persona). This is hard work - why depression persists.'
                    }
                ],
                questions: [
                    {
                        question: 'Client on antidepressants says: "I feel better but something still feels off." Miller might say:',
                        answers: [
                            { text: 'Try different medication', correct: false, feedback: 'Miller wouldn\'t focus on medication adjustment. Would explore what "feels off" - likely continued disconnection from authentic self.' },
                            { text: 'Medication may relieve symptoms but hasn\'t addressed underlying issue - living false life, disconnection from true self, repressed feelings', correct: true, feedback: 'MILLER\'S VIEW! Medication can help stabilize but doesn\'t solve: why person needed to disconnect from self, what they\'re repressing, what authentic life would look like. "Feeling off" = psyche knowing something unresolved. Therapy explores: What would change if you lived authentically? What feelings are still forbidden? Whose life are you living? Sometimes medication helps person stabilize ENOUGH to do this deeper work. But pills alone don\'t create self-connection.' },
                            { text: 'They\'re cured, just need time to adjust', correct: false, feedback: 'Miller would say: if underlying issues (false self, repression, living for others) aren\'t addressed, "something off" will persist no matter how symptoms are managed.' },
                            { text: 'Depression is purely biological', correct: false, feedback: 'Miller challenges this! Depression has meaning, signals something about person\'s life and self-betrayal.' }
                        ]
                    },
                    {
                        question: 'What does Miller mean by "depression is a healthy response to an unhealthy situation"?',
                        answers: [
                            { text: 'Depression is good and shouldn\'t be treated', correct: false, feedback: 'Not that depression is desirable! But it\'s meaningful response to living falsely, being disconnected from self, continuing self-betrayal.' },
                            { text: 'Psyche\'s way of protesting false life - depression signals "this way of living is killing your authentic self" and refuses to continue adaptation', correct: true, feedback: 'YES! Depression is HEALTHY in sense that: it refuses to collude with continued self-betrayal, signals something fundamentally wrong, prevents person from continuing false path indefinitely. It\'s psyche saying: "I cannot keep living this lie." Person may be "functional" on outside but dead inside - depression is body/psyche\'s NO to this. Recovery means: listening to depression\'s message, doing the difficult work of reclaiming authentic self, changing how you live. Depression lifts when person reconnects to truth of their experience and authentic desires.' },
                            { text: 'Depression only happens in unhealthy situations', correct: false, feedback: 'Miller focuses on depression rooted in false self development, but acknowledges depression can have multiple causes including biology, loss, trauma.' },
                            { text: 'Healthy people never get depressed', correct: false, feedback: 'Opposite! Miller suggests living falsely (which looks "healthy"/successful) creates depression. Living authentically (which may look messy) reduces it.' }
                        ]
                    }
                ]
            }
        ]
    },

    // LEVEL 2: INTERMEDIATE
    {
        id: 'poisonous-pedagogy',
        title: 'Poisonous Pedagogy',
        icon: '‚ö†Ô∏è',
        level: 2,
        xp: 30,
        prereq: 'depression-meaning',
        lessons: [
            {
                title: 'Traditional Child-Rearing as Abuse',
                teaching: `Miller coined "POISONOUS PEDAGOGY" to describe traditional child-rearing practices that: break child's will, demand obedience, suppress feelings, use shame/guilt, claim to be "for child's own good."

Examples: "Children should be seen not heard," "Spare the rod spoil the child," "Don't cry or I'll give you something to cry about," "You should be grateful," "Respect your elders" (without reciprocal respect for child).

These practices appear normal, even virtuous. But they systematically: deny child's reality, suppress authentic self, install obedience over integrity, use child to meet adult needs. This is ABUSE disguised as good parenting.`,
                concepts: [
                    {
                        title: 'How Poisonous Pedagogy Works',
                        text: 'Tells child: your feelings are wrong/bad, your needs are too much, your will must be broken, obedience is virtue, adults are always right, your purpose is to please adults. Child learns: I am fundamentally flawed, my authentic self is unacceptable, survival requires compliance.'
                    },
                    {
                        title: 'Intergenerational Transmission',
                        text: 'Parents use poisonous pedagogy because: it was used on them, they haven\'t processed own childhood pain, breaking child\'s will prevents their own feelings from emerging, maintaining hierarchical control feels safe. Cycle continues until someone does the work of feeling their own childhood pain.'
                    }
                ],
                questions: [
                    {
                        question: 'Client says: "I was spanked as a child and I turned out fine. What\'s wrong with discipline?" From Miller\'s view:',
                        answers: [
                            { text: 'They did turn out fine, spanking is okay', correct: false, feedback: 'Miller would question "fine" - did they turn out with connection to true self, able to feel fully, living authentically? Or did they adapt, repress, develop false self?' },
                            { text: '"Turning out fine" may mean successfully adapting (false self) rather than authentic development - and defending parents\' actions prevents feeling own pain', correct: true, feedback: 'MILLER INSIGHT! "I turned out fine" often means: I successfully learned to repress, adapted to avoid further punishment, disconnected from own feelings, internalized parents\' values over authentic self. Person may be "functional" but disconnected from true self. Defending parents ("it was fine, I deserved it") serves crucial function: protects from feeling the rage and grief at being treated this way. If they acknowledged spanking was harmful, would have to feel: rage at parents, grief at childhood lost, terror of being small and hurt. Easier to maintain: "It was fine, I was bad, it helped me." This is WHY pain transmits intergenerationally - we can\'t feel our own, so repeat it.' },
                            { text: 'All discipline is poisonous pedagogy', correct: false, feedback: 'Miller distinguishes: discipline respecting child\'s autonomy/feelings vs. discipline designed to break will, instill fear, demand blind obedience. Latter is poisonous pedagogy.' },
                            { text: 'They\'re lying about being fine', correct: false, feedback: 'Not lying - genuinely may believe they\'re fine because recognizing damage is too threatening. The defense is: "I\'m fine" = "My parents were okay" = "I don\'t have to feel the pain."' }
                        ]
                    },
                    {
                        question: 'Parent asks: "How do I set limits without poisonous pedagogy?" Miller would say:',
                        answers: [
                            { text: 'Never set any limits', correct: false, feedback: 'Miller isn\'t against boundaries! Distinguishes between: limits respecting child\'s personhood vs. control designed to break will.' },
                            { text: 'Set limits while respecting child\'s feelings and autonomy - explain reasons, allow child to have feelings about limits, don\'t use shame/fear/humiliation', correct: true, feedback: 'EXACTLY! Healthy limits: "You can\'t hit your sister - that hurts her. I know you\'re angry (validates feeling), and you can\'t hit (sets boundary). Let\'s find other ways to express anger." Poisonous pedagogy: "How dare you hit her! You\'re bad! Go to your room!" (shames child, invalidates anger, breaks will). Difference: Healthy limits teach while respecting personhood. Poisonous pedagogy controls through shame/fear while denying child\'s reality. You can have boundaries AND validate feelings. Can say "no" without humiliating child.' },
                            { text: 'Children don\'t need limits', correct: false, feedback: 'Children need appropriate limits for safety and learning. Issue is HOW limits are set - with respect for child\'s humanity or through shame/control.' },
                            { text: 'Do whatever your child wants', correct: false, feedback: 'Not permissiveness! Miller advocates respecting child\'s FEELINGS while still maintaining appropriate boundaries. Can acknowledge child\'s desire for candy while saying no.' }
                        ]
                    },
                    {
                        question: 'Why does poisonous pedagogy persist across generations?',
                        answers: [
                            { text: 'Parents are evil', correct: false, feedback: 'Not about evil! About unconscious transmission of unprocessed pain.' },
                            { text: 'Parents unconsciously repeat what was done to them because facing own childhood pain is too threatening - easier to justify it as "good for child"', correct: true, feedback: 'MILLER\'S KEY INSIGHT! Cycle continues because: 1) Acknowledging you were harmed means feeling the pain (rage, grief, terror) - overwhelming. 2) Easier to maintain: "It was fine, even good for me" and do same to your kids. 3) When your child resists/rebels, triggers YOUR repressed feelings - your parents couldn\'t tolerate your feelings, you can\'t tolerate child\'s. 4) Breaking child\'s will prevents YOUR pain from emerging. Breaking cycle requires: doing own therapeutic work, feeling YOUR childhood pain, mourning what you didn\'t get, choosing to parent differently despite lack of model. This is hard - why cycle persists.' },
                            { text: 'It\'s the only way to raise children', correct: false, feedback: 'Demonstrably false! Many cultures and individuals raise children with respect, empathy, and without poisonous pedagogy. It\'s learned behavior, not necessity.' },
                            { text: 'Children need it', correct: false, feedback: 'Children need respect, boundaries with empathy, acknowledgment of feelings. Don\'t need will broken, autonomy crushed, authentic self denied.' }
                        ]
                    }
                ]
            }
        ]
    },
    {
        id: 'compulsion-repeat',
        title: 'Compulsion to Repeat',
        icon: 'üîÑ',
        level: 2,
        xp: 30,
        prereq: 'poisonous-pedagogy',
        lessons: [
            {
                title: 'Why We Recreate Our Pain',
                teaching: `Miller observed: people unconsciously RECREATE childhood dynamics in adult life. Not because they want suffering, but because:

1. Familiar = safe (even if painful)
2. Unconscious hope to get different outcome this time
3. Attempt to master original trauma
4. Repressed feelings seeking expression

Examples: choosing partners similar to abusive parent, becoming therapist who "saves" others (while avoiding own pain), achieving to prove worth to parent who never approved.

The compulsion only stops when: original pain is consciously felt and processed.`,
                concepts: [
                    {
                        title: 'Repetition in Relationships',
                        text: 'Person with critical parent seeks critical partner (unconsciously). Why? Familiar pattern feels like "home." Also: unconscious fantasy that THIS time, if I\'m good enough, I\'ll get the love/approval. Keeps recreating unwinnable situation trying to win it.'
                    },
                    {
                        title: 'Repetition in Parenting',
                        text: 'Despite vowing "I\'ll never do what my parents did," people repeat patterns unless they\'ve processed their own pain. When child triggers you, you respond from YOUR wounded child, not adult wisdom. Only processing own childhood pain prevents transmission.'
                    }
                ],
                questions: [
                    {
                        question: 'Client repeatedly chooses emotionally unavailable partners despite therapy insights. Miller would focus on:',
                        answers: [
                            { text: 'They have bad judgment', correct: false, feedback: 'Not about judgment! About unconscious compulsion to repeat familiar dynamic.' },
                            { text: 'Unconscious recreation of unavailable parent - must access and feel original pain of not being seen/met to stop pattern', correct: true, feedback: 'EXACTLY! Pattern: Had unavailable parent ‚Üí Adapted by suppressing needs, becoming independent ‚Üí Unconsciously seeks unavailable partner (familiar!) ‚Üí Hopes THIS time they\'ll get the unavailability to transform into availability (magical thinking). Insight alone doesn\'t stop this! Need to: 1) Feel the original grief/rage at parent\'s unavailability (not just understand it), 2) Mourn the fantasy of getting needs met by unavailable person, 3) Grieve what you didn\'t get and won\'t get, 4) THEN choose differently from conscious, grieved place. Until original pain is felt, unconscious keeps seeking familiar pattern trying to heal it.' },
                            { text: 'They should just pick better partners', correct: false, feedback: 'Conscious choice limited when unconscious is driving! "Just choose better" ignores compulsion to repeat. Must process original pain first.' },
                            { text: 'Unavailable partners are all that\'s available', correct: false, feedback: 'Unconscious CREATES availability by being attracted to/choosing unavailable people. This is about internal pattern, not external reality.' }
                        ]
                    },
                    {
                        question: 'Why does Miller say feeling original pain is necessary to stop repeating patterns?',
                        answers: [
                            { text: 'Punishment for past mistakes', correct: false, feedback: 'Not punishment! Healing necessity.' },
                            { text: 'Until repressed feelings are consciously experienced, they drive behavior unconsciously - compulsion to repeat seeks resolution but keeps recreating pain instead', correct: true, feedback: 'CORE MILLER PRINCIPLE! Repressed pain doesn\'t disappear - it seeks expression. Unconsciously tries to: recreate original situation (familiar), get different outcome this time (magical hope), master the trauma (through repetition). But person can\'t get needs met from substitute (current partner can\'t fix what parent didn\'t give). Repetition compulsion continues until: original feelings (rage at parent, grief at what wasn\'t given) are FELT and GRIEVED. Then: stops seeking old solution to old wound, can choose from present reality not past pain, compulsion lifts because pain has been acknowledged/processed. This is why insight alone insufficient - must FEEL, not just understand.' },
                            { text: 'Suffering builds character', correct: false, feedback: 'Not about suffering! About feeling what was repressed so it stops unconsciously driving you.' },
                            { text: 'Pain prevents future relationships', correct: false, feedback: 'Opposite! Feeling pain FREES you for authentic relationships. Avoiding pain creates compulsion to repeat.' }
                        ]
                    }
                ]
            }
        ]
    },
    {
        id: 'enlightened-witness',
        title: 'The Enlightened Witness',
        icon: 'üëÅÔ∏è',
        level: 2,
        xp: 35,
        prereq: 'compulsion-repeat',
        lessons: [
            {
                title: 'Someone Who Truly Sees',
                teaching: `Miller's concept of ENLIGHTENED WITNESS: person who sees and validates child's/client's true reality when parents could not.

This can be: therapist, teacher, grandparent, friend - anyone who mirrors back "What happened to you was real, was wrong, you deserved better." Breaks child's isolation and self-blame.

Enlightened witness doesn't: rescue, fix, save. They WITNESS: acknowledge reality, validate feelings, reflect truth that child couldn't see alone. This witnessing is profoundly healing - undoes gaslighting, breaks isolation, allows grief to emerge.`,
                concepts: [
                    {
                        title: 'What Makes Witness "Enlightened"',
                        text: 'They have done own work - processed their childhood pain, can tolerate intense feelings, won\'t defend abusive parents, can see clearly without own unresolved issues distorting perception. This requires therapist/helper to be in own therapy/supervision.'
                    },
                    {
                        title: 'The Power of Being Seen',
                        text: 'Child who was narcissistically used: never truly seen as separate person with own feelings/needs. Enlightened witness SEES them - this is revolutionary! Witness says through presence: "You exist. Your feelings matter. What happened was real." Unlocks grief, rage, healing.'
                    }
                ],
                questions: [
                    {
                        question: 'Client describes neglectful childhood but says: "But my parents did their best, had hard lives themselves." As enlightened witness, you:',
                        answers: [
                            { text: 'Agree - parents always do their best', correct: false, feedback: 'This colludes with client\'s defense! Enlightened witness helps client see truth, including that "doing your best" doesn\'t negate harm done.' },
                            { text: 'Gently challenge: "Your parents may have had reasons for their behavior, AND you deserved better. Can we hold both truths?"', correct: true, feedback: 'ENLIGHTENED WITNESS stance! Client defending parents serves function: protects from feeling rage/grief. But healing requires feeling the truth. You: validate that parents had hard lives (this is true) AND validate that child deserved better (also true). Can hold: empathy for parents\' struggles, acknowledgment that child was harmed. Client needs permission to feel anger at being neglected even if "parents did their best." Often once client can feel anger, empathy for parents returns - but now genuine, not defensive. Enlightened witness breaks false dichotomy: "Either my parents are evil OR I\'m ungrateful." Offers: "Your parents were limited people who harmed you, you can grieve this, AND have empathy for their struggles."' },
                            { text: 'Say "Your parents were terrible people"', correct: false, feedback: 'Not about demonizing parents! About witnessing harm done to client. Can acknowledge parents\' humanity while validating client\'s pain.' },
                            { text: 'Focus only on client\'s resilience', correct: false, feedback: 'While resilience is real, focusing only on "you survived!" bypasses grief. Client needs feelings validated first.' }
                        ]
                    },
                    {
                        question: 'What makes therapist an effective enlightened witness?',
                        answers: [
                            { text: 'Having perfect technique', correct: false, feedback: 'Not about technique! About presence, having done own work, capacity to witness without defending.' },
                            { text: 'Therapist has processed own childhood pain, can tolerate client\'s intense feelings, won\'t defend parents\' abuse, sees clearly without own wounds distorting', correct: true, feedback: 'YES! Enlightened witness requires: 1) OWN THERAPY - if therapist hasn\'t felt own childhood pain, will unconsciously defend parents, minimize abuse, can\'t tolerate client\'s rage. 2) CLEAR SEEING - not distorted by: need to see parents as good, need to rescue, own unresolved issues. 3) EMOTIONAL CAPACITY - can sit with: client\'s rage without defending parents, grief without rushing to comfort, terror without rescuing. 4) NO AGENDA - not trying to: make client forgive, see parents\' side, move on. Just WITNESS reality. This is why Miller emphasizes: therapists need extensive own therapy. Can\'t witness what you haven\'t faced in yourself.' },
                            { text: 'Being older than client', correct: false, feedback: 'Age doesn\'t matter! Quality of witness is about having done the work, not chronological age.' },
                            { text: 'Never questioning client\'s perspective', correct: false, feedback: 'Enlightened witness isn\'t blind validation! Is helping client see truth, which sometimes means gently challenging defenses ("I notice you laugh when describing abuse - what are you protecting yourself from feeling?").' }
                        ]
                    }
                ]
            }
        ]
    },

    // LEVEL 3: ADVANCED
    {
        id: 'therapeutic-process',
        title: 'Therapeutic Process',
        icon: 'üå±',
        level: 3,
        xp: 40,
        prereq: 'enlightened-witness',
        lessons: [
            {
                title: 'How Healing Happens',
                teaching: `Miller's therapeutic process (not a technique but a journey):

1. BREAK THROUGH IDEALIZATION - client must stop defending/idealizing parents. This is terrifying (threatens attachment, identity, worldview).

2. FEEL REPRESSED FEELINGS - rage at being used/unseen, grief at loss of authentic self, terror of childhood helplessness. This can't be bypassed.

3. MOURN WHAT WAS LOST - grieve the childhood that never was, the parents who couldn't truly see them, the authentic self that was suppressed.

4. RECLAIM TRUE SELF - discover authentic feelings, desires, values separate from parental expectations.

5. CHOOSE AUTHENTIC LIFE - may mean: career change, relationship endings, setting boundaries with parents, living differently than expected.

This is not linear. Cyclical, with resistance, setbacks, terror. Requires courage and support.`,
                concepts: [
                    {
                        title: 'Why Breaking Idealization is Crucial',
                        text: 'As long as client maintains "my parents were wonderful/did their best," can\'t access rage and grief. Idealization is defense against overwhelming pain. Must be challenged gently but persistently. Not to blame parents but to see truth of what happened.'
                    },
                    {
                        title: 'The Role of Rage',
                        text: 'Rage at parents is NECESSARY and HEALTHY. It\'s psyche\'s protest: "What you did was wrong!" Client often fears rage means they\'re bad person. Reassure: Feeling rage doesn\'t mean acting on it, doesn\'t negate love, is appropriate response to being harmed. Rage must be felt, not suppressed.'
                    }
                ],
                questions: [
                    {
                        question: 'Client says: "I understand intellectually my parents were narcissistic but I can\'t feel angry at them. They\'re old now, struggling." What\'s the work?',
                        answers: [
                            { text: 'Accept they won\'t feel anger', correct: false, feedback: 'The inability to feel anger IS the problem! It\'s repression, not resolution.' },
                            { text: 'Help them access rage by: challenging "they\'re old now" defense (age doesn\'t negate harm), exploring what anger would mean (disloyalty? becoming bad person?), creating safety to feel forbidden feeling', correct: true, feedback: 'THERAPEUTIC WORK! Client\'s blocks: "They\'re old" = can\'t hurt fragile people (but YOU were fragile child they hurt). "They\'re struggling" = must protect/care for them (role reversal continues). Underneath: terror that feeling rage means = being bad person, destroying parents, losing connection forever, becoming abuser. Work: 1) Rage at what happened to child-you is SEPARATE from current relationship with elderly parents. Can feel rage about past without harming them now. 2) Explore: What did anger mean in your family? What happens if you\'re angry? 3) Rage is HEALTHY response to being harmed - doesn\'t make you bad. 4) Create safety: "What if you let yourself feel rage just here, just with me, just for this moment?" Rage must be accessed and expressed (in therapy) for healing to proceed.' },
                            { text: 'Convince them their parents were evil', correct: false, feedback: 'Not about making parents evil! About feeling authentic rage at harm done. Can acknowledge parents\' humanity while feeling anger about what they did.' },
                            { text: 'Help them forgive parents', correct: false, feedback: 'Premature! Can\'t genuinely forgive (if that even happens) until you\'ve felt rage and grief. "Forgiveness" without feeling is another defense.' }
                        ]
                    },
                    {
                        question: 'Client completing therapy says: "I\'ve felt the rage, mourned what I lost. Now what?" What does Miller suggest healing leads to?',
                        answers: [
                            { text: 'Perfect happiness forever', correct: false, feedback: 'Not perfect state! But capacity for: authentic living, feeling fully, choosing from true self rather than false adaptation.' },
                            { text: 'Living authentically - making choices from true self not false self, feeling full range of emotions, pursuing genuine desires, setting boundaries, being real in relationships', correct: true, feedback: 'HEALING OUTCOME! After feeling rage and grief, client can: 1) KNOW WHAT THEY FEEL - connected to emotions, not dissociated. 2) KNOW WHAT THEY WANT - can differentiate own desires from internalized parental expectations. 3) MAKE AUTHENTIC CHOICES - career, relationships, lifestyle based on true self not "shoulds." 4) SET BOUNDARIES - can say no, can disappoint others, can prioritize own needs without overwhelming guilt. 5) BE REAL - drop performance, be imperfect, authentic in relationships. 6) TOLERATE FULL FEELING RANGE - joy, rage, grief, fear all accessible. Still challenges, still pain, but living from truth not lies. This is freedom - not happiness but authenticity.' },
                            { text: 'Never experiencing pain again', correct: false, feedback: 'Life still brings pain! But person can FEEL it authentically rather than: dissociating, repressing, developing psychosomatic symptoms, staying depressed.' },
                            { text: 'Becoming perfect parent', correct: false, feedback: 'Not about perfection! But having done own work, less likely to unconsciously transmit unresolved pain to next generation.' }
                        ]
                    },
                    {
                        question: 'What\'s Miller\'s view on forgiveness?',
                        answers: [
                            { text: 'Always forgive your parents', correct: false, feedback: 'Miller doesn\'t prescribe forgiveness! Says it can\'t be forced, must be authentic if it comes at all.' },
                            { text: 'Forgiveness may come naturally after feeling rage and grief, or may not - either way is valid. Can\'t be forced or prescribed. Premature "forgiveness" is often defense.', correct: true, feedback: 'MILLER\'S NUANCED VIEW! 1) "SHOULD forgive" is another poisonous pedagogy message - another way to invalidate feelings. 2) Premature forgiveness = defense against rage. Person says "I forgive them" to avoid feeling anger. This isn\'t real forgiveness, it\'s repression. 3) IF forgiveness comes, it\'s AFTER: fully feeling rage, grieving losses, seeing parents clearly, reclaiming authentic self. Can\'t forgive from defensive/false place. 4) Forgiveness MAY or MAY NOT come - both okay! Some people, after processing everything, feel: compassion for parents\' struggles, understanding of limitations, release of rage. Others maintain: "What they did was wrong, I\'ve grieved it, I don\'t forgive and that\'s okay." Both paths valid. Don\'t prescribe outcome.' },
                            { text: 'Never forgive - stay angry forever', correct: false, feedback: 'Miller doesn\'t prescribe staying angry either! After rage is felt and processed, often naturally softens. But that\'s organic, not prescribed.' },
                            { text: 'Forgiveness is weakness', correct: false, feedback: 'Not about strength/weakness! About authenticity. Forced forgiveness is false. Organic forgiveness (if it comes) can be healing. Neither is "better."' }
                        ]
                    }
                ]
            }
        ]
    },
    {
        id: 'societal-implications',
        title: 'Societal Implications',
        icon: 'üåç',
        level: 3,
        xp: 40,
        prereq: 'therapeutic-process',
        lessons: [
            {
                title: 'From Individual to Collective',
                teaching: `Miller saw connection between childhood trauma and societal violence. Argued: people who haven't processed childhood pain unconsciously perpetuate violence - in families, institutions, politics, war.

Examples:
- Leaders with repressed rage becoming tyrants
- Citizens raised with poisonous pedagogy accepting authoritarianism (trained to obey, not question)
- Generational trauma creating cycles of war/violence
- Inability to empathize with "other" because never empathized with own child-self

Healing childhood pain isn't just individual therapy - it's violence prevention, creation of more humane society. People connected to own feelings can empathize with others' feelings.`,
                concepts: [
                    {
                        title: 'Authoritarianism and Childhood',
                        text: 'Miller analyzed how: children raised with poisonous pedagogy (obedience, will-breaking, no questioning authority) become adults vulnerable to authoritarian leaders. Haven\'t learned: critical thinking, trusting own perceptions, valuing autonomy. Democracy requires citizens who can question authority - starts in childhood.'
                    },
                    {
                        title: 'Prevention Through Awareness',
                        text: 'If society acknowledged: impact of childhood trauma, importance of child\'s emotional needs, damage of poisonous pedagogy - could prevent immense suffering. But this requires adults facing own childhood pain, which is threatening. Easier to perpetuate cycle.'
                    }
                ],
                questions: [
                    {
                        question: 'Miller argued childhood trauma contributes to societal violence. What\'s the mechanism?',
                        answers: [
                            { text: 'Abused children always become violent adults', correct: false, feedback: 'Not deterministic! But unprocessed childhood pain increases risk of violence - either to self or others.' },
                            { text: 'Repressed childhood rage seeks outlet - can be directed at: own children, scapegoated groups, "enemies," self (suicide/self-harm). Processing own pain reduces violence.', correct: true, feedback: 'MILLER\'S SOCIETAL ANALYSIS! Rage at childhood mistreatment doesn\'t disappear if repressed. Unconsciously seeks: 1) DISPLACEMENT to others - scapegoating minorities, supporting war, abusing subordinates, beating own children. Can\'t feel rage at own parents, so finds "acceptable" targets. 2) SELF-DESTRUCTION - suicide, addiction, self-harm when rage turns completely inward. 3) IDENTIFICATION with aggressor - becoming like abusive parent, joining authoritarian movements that let you dominate others. If society helped people: acknowledge childhood pain, feel rage in therapeutic settings, grieve losses, reclaim authentic selves - violence would decrease. People connected to own feelings can feel for others. Those dissociated from own pain can\'t empathize, more likely to harm.' },
                            { text: 'Childhood has nothing to do with adult violence', correct: false, feedback: 'Miller sees direct connection! Doesn\'t mean all abuse victims become violent, but unprocessed trauma creates risk.' },
                            { text: 'Only poor people have childhood trauma', correct: false, feedback: 'Trauma crosses all classes! Narcissistic parenting, poisonous pedagogy happen in wealthy families too.' }
                        ]
                    },
                    {
                        question: 'Why does Miller think societal change requires individual healing work?',
                        answers: [
                            { text: 'It doesn\'t - only need policy changes', correct: false, feedback: 'Policy helps but insufficient if citizens unconsciously perpetuate patterns due to unprocessed pain.' },
                            { text: 'People with unprocessed childhood pain unconsciously perpetuate violence/authoritarian systems - can\'t create humane society until enough individuals have done healing work', correct: true, feedback: 'MILLER\'S VISION! Can\'t vote for/create just, empathic society if: majority raised with poisonous pedagogy (obedience over autonomy), haven\'t processed own pain (can\'t empathize with others\'), continue cycle with own children (next generation traumatized). Society is collection of individuals - if individuals carry: repressed rage, dissociation, need to dominate/obey, intolerance of feelings - societal structures will reflect this. HEALING PATH: Individual therapy ‚Üí processes childhood pain ‚Üí becomes enlightened witness ‚Üí parents differently ‚Üí children raised with empathy ‚Üí next generation more whole ‚Üí gradually, collective consciousness shifts. This is slow! But Miller saw: no shortcut. Can\'t legislate empathy, can\'t force self-awareness. Change happens person by person, generation by generation, as more people do the work.' },
                            { text: 'Individual healing is selfish and doesn\'t matter', correct: false, feedback: 'Opposite! Miller saw individual healing as PREREQUISITE for societal change. Your healing prevents transmission to next generation and changes how you engage with world.' },
                            { text: 'Society is fine, no change needed', correct: false, feedback: 'Miller saw tremendous suffering - war, abuse, oppression - rooted partly in unprocessed collective childhood trauma. Believed deeply humane society is possible but requires healing work.' }
                        ]
                    }
                ]
            }
        ]
    },
    {
        id: 'integration-mastery',
        title: 'Integration & Application',
        icon: 'üíé',
        level: 3,
        xp: 50,
        prereq: 'societal-implications',
        lessons: [
            {
                title: 'Living Miller\'s Insights',
                teaching: `Integrating Miller's work means:

PERSONALLY:
- Doing your own therapeutic work, feeling your childhood pain
- Living authentically rather than from false self
- Setting boundaries even when it disappoints others
- Feeling full range of emotions
- Parenting (if you have children) with awareness and empathy

PROFESSIONALLY:
- Being enlightened witness for clients
- Challenging idealization gently but persistently
- Tolerating clients' rage without defending parents
- Staying in own therapy/supervision
- Not colluding with defenses

SOCIETALLY:
- Recognizing poisonous pedagogy when you see it
- Advocating for children's emotional needs
- Breaking silence about childhood trauma
- Supporting trauma-informed approaches

This isn't perfectionism - it's commitment to truth and ongoing growth.`,
                concepts: [
                    {
                        title: 'The Ongoing Nature',
                        text: 'Miller\'s work isn\'t destination but journey. Will always find: new layers of false self, moments of defending parents, times of disconnection from true self. This is normal! Awareness itself is progress. Keep returning to: What am I feeling? What do I truly want? Am I living authentically?'
                    },
                    {
                        title: 'Compassion for Self and Others',
                        text: 'Understanding Miller doesn\'t mean: judging self harshly for having false self, condemning parents, seeing everyone as damaged. Means: compassion for self (you adapted to survive), compassion for parents (they were wounded children too), commitment to breaking cycle where possible.'
                    }
                ],
                questions: [
                    {
                        question: 'You notice yourself getting irritated when client won\'t stop defending obviously abusive parents. Miller would say:',
                        answers: [
                            { text: 'Your irritation is inappropriate', correct: false, feedback: 'Irritation is natural! Question is: what\'s it about? Likely your own unresolved material being triggered.' },
                            { text: 'This probably touches your own unresolved childhood pain - bring to supervision/own therapy. Client\'s defense threatening because reminds you of your own?', correct: true, feedback: 'CRUCIAL SELF-AWARENESS! When client\'s defense irritates you: 1) Are they defending parents the way YOU once did (or still do)? Threatening to witness because you\'re not fully there yourself? 2) Is their pain similar to YOUR unprocessed pain? Easier to be impatient than feel your own grief? 3) Your irritation is INFORMATION - shows edge of your own work. Miller emphasizes: therapist must continuously work on own issues. If you haven\'t fully felt YOUR rage at YOUR parents, will struggle to witness client\'s process. Bring to supervision: "Why does this client\'s defense irritate me? What in ME is being activated?" Do YOUR work so you can hold space for theirs.' },
                            { text: 'Client is being difficult', correct: false, feedback: 'Client is DEFENDING (necessarily!) against overwhelming pain. Irritation suggests your edge, not their problem.' },
                            { text: 'Force them to stop defending', correct: false, feedback: 'Can\'t force! Must gently, over time, help them see truth. But if you\'re irritated, suggests you need to do own work first.' }
                        ]
                    },
                    {
                        question: 'What\'s the relationship between Miller\'s work and self-compassion?',
                        answers: [
                            { text: 'Miller is all about blame, not compassion', correct: false, feedback: 'Opposite! Understanding false self development creates compassion for why you adapted.' },
                            { text: 'Understanding you developed false self to survive (not because you\'re flawed) creates self-compassion - you adapted brilliantly to impossible situation', correct: true, feedback: 'BEAUTIFUL INTEGRATION! Miller\'s work INCREASES self-compassion when understood: 1) False self isn\'t your fault - you created it to SURVIVE. As child, had to adapt or risk losing attachment. You did the best you could. 2) Depression, emptiness, people-pleasing - these make SENSE given childhood. You\'re not broken, you\'re wounded. 3) Even continuing patterns make sense - unconscious trying to heal, you just need help to do it consciously. 4) Feeling rage at parents isn\'t being bad child - it\'s healthy response to harm. With compassion: see wounded child you were, honor adaptive brilliance, acknowledge pain you carried, support yourself in doing hard work of reclaiming authentic self. Miller\'s lens creates: understanding (not self-blame), compassion (not shame), hope (can change, can heal).' },
                            { text: 'Self-compassion means never challenging yourself', correct: false, feedback: 'Can have compassion while still doing hard work! Compassion for WHY you are how you are, while choosing to change/grow.' },
                            { text: 'Miller teaches self-hatred', correct: false, feedback: 'Opposite! Teaches compassion for self (wounded child who adapted) while challenging defenses and supporting authentic growth.' }
                        ]
                    },
                    {
                        question: 'Someone asks: "What\'s the main takeaway from Miller\'s work?" What do you say?',
                        answers: [
                            { text: '"All parents are terrible"', correct: false, feedback: 'Not the point! About specific dynamic of narcissistic parenting and its effects.' },
                            { text: '"Gifted children adapt to narcissistic parents by developing false self, disconnecting from true feelings. Healing requires: feeling repressed rage/grief, mourning losses, reclaiming authentic self, living truthfully."', correct: true, feedback: 'EXCELLENT SUMMARY! Core elements: 1) GIFTED CHILD = emotionally perceptive child who becomes what parents need (false self) at cost of losing authentic self. 2) REPRESSION = rage, grief, and authentic desires must be repressed to maintain adaptation. Shows up as depression, emptiness, psychosomatic symptoms. 3) HEALING = breaking idealization of parents, feeling forbidden rage/grief, mourning what was lost, discovering true self, choosing authentic life even if disappointing to parents. 4) TRANSMISSION = unless healed, unconsciously repeat with own children. Cycle breaks when individual does the work. 5) LIBERATION = living from true self, feeling fully, choosing authentically. Not easy but real. Miller offers: understanding of how self gets lost in childhood, roadmap for reclaiming it, hope that authentic living is possible.' },
                            { text: '"Blame your parents for everything"', correct: false, feedback: 'Not about blame! About understanding, feeling, grieving, then choosing differently. Can acknowledge parents\' failures while having compassion for their wounds.' },
                            { text: '"Forget the past and move on"', correct: false, feedback: 'Opposite! Must FEEL the past to be free of it. Can\'t move on from what you haven\'t processed. Genuine freedom comes from facing truth, not avoiding it.' }
                        ]
                    }
                ]
            }
        ]
    }
];

        function initSkillTree() {
            const container = document.getElementById('skill-tree');
            container.innerHTML = '';
            
            skillTree.forEach(skill => {
                const isCompleted = gameState.completedSkills.includes(skill.id);
                const isUnlocked = !skill.prereq || gameState.completedSkills.includes(skill.prereq);
                const progress = gameState.skillProgress[skill.id] || 0;
                const totalLessons = skill.lessons.length;
                
                const node = document.createElement('div');
                node.className = `skill-node ${isCompleted ? 'completed' : ''} ${isUnlocked ? 'unlocked' : 'locked'}`;
                
                // Find prerequisite skill name
                let prereqName = '';
                if (!isUnlocked && skill.prereq) {
                    const prereqSkill = skillTree.find(s => s.id === skill.prereq);
                    prereqName = prereqSkill ? prereqSkill.title : '';
                }
                
                node.innerHTML = `
                    ${!isUnlocked ? '<div class="skill-lock">üîí</div>' : ''}
                    <div class="skill-icon">${skill.icon}</div>
                    <div class="skill-title">${skill.title}</div>
                    ${isCompleted ? '<div style="margin-top:8px; color:#fc0;">‚úì MASTERED</div>' : ''}
                    ${!isUnlocked && prereqName ? `<div class="skill-prereq">Complete: ${prereqName}</div>` : ''}
                `;
                
                // Make unlocked nodes keyboard accessible
                if (isUnlocked && !isCompleted) {
                    node.setAttribute('tabindex', '0');
                    node.setAttribute('role', 'button');
                    node.setAttribute('aria-label', `Start ${skill.title} skill`);
                    node.onclick = () => startSkill(skill);
                    node.onkeypress = (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            startSkill(skill);
                        }
                    };
                }
                
                container.appendChild(node);
            });
            
            updateHeader();
            updatePathDisplay();
        }
        
        function updatePathDisplay() {
            const level = gameState.level;
            let path = 'FOUNDATIONS';
            if (level >= 3) path = 'ADVANCED';
            else if (level >= 2) path = 'INTERMEDIATE';
            
            document.getElementById('current-path').textContent = path;
        }
        
        function updateHeader() {
            const xpPercent = (gameState.xp / gameState.xpToNextLevel) * 100;
            document.getElementById('xp-bar').style.width = xpPercent + '%';
            document.getElementById('xp-text').textContent = `${gameState.xp} / ${gameState.xpToNextLevel} XP`;
            document.getElementById('level-display').textContent = gameState.level;
            
            const totalSkills = skillTree.length;
            const completedCount = gameState.completedSkills.length;
            const masteryPercent = Math.round((completedCount / totalSkills) * 100);
            document.getElementById('mastery-display').textContent = masteryPercent + '%';
            document.getElementById('streak-display').textContent = gameState.streak + 'üî•';
        }
        
        function startSkill(skill) {
            gameState.currentLesson = skill;
            gameState.currentQuestion = 0;
            gameState.correctAnswers = 0;
            showLesson(skill.lessons[0]);
        }
        
        function showLesson(lesson) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modal-content');
            
            const concepts = lesson.concepts.map(c => `
                <div class="key-concept">
                    <div class="concept-title">${c.title}</div>
                    <div class="concept-text">${c.text}</div>
                </div>
            `).join('');
            
            content.innerHTML = `
                <div class="lesson-header">
                    <div class="lesson-title">${lesson.title}</div>
                    <div class="lesson-subtitle">${gameState.currentLesson.title}</div>
                </div>
                
                <div class="teaching-section">
                    <div class="teaching-text">${lesson.teaching}</div>
                    ${concepts}
                </div>
                
                <button class="continue-btn" onclick="startQuestions()">START QUESTIONS ‚Üí</button>
                <button class="back-btn" onclick="closeModal()">‚úï BACK</button>
                <div style="clear:both;"></div>
            `;
            
            modal.classList.add('active');
        }
        
        function startQuestions() {
            const lesson = gameState.currentLesson.lessons[0];
            showQuestion(lesson.questions[gameState.currentQuestion]);
        }
        
        function showQuestion(question) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modal-content');
            
            window.currentQuestion = question;
            
            const answerButtons = question.answers.map((ans, idx) => `
                <button class="answer-btn" onclick="checkAnswer(${idx})">${ans.text}</button>
            `).join('');
            
            const progress = `Question ${gameState.currentQuestion + 1} of ${gameState.currentLesson.lessons[0].questions.length}`;
            const totalQuestions = gameState.currentLesson.lessons[0].questions.length;
            const scoreDisplay = gameState.currentQuestion > 0 
                ? `<div class="score-tracker">SCORE: <span class="score-value">${gameState.correctAnswers}/${gameState.currentQuestion}</span> correct so far</div>`
                : '';
            
            content.innerHTML = `
                <div class="lesson-header">
                    <div class="lesson-title">${gameState.currentLesson.title}</div>
                    <div class="lesson-subtitle">${progress}</div>
                </div>
                
                ${scoreDisplay}
                
                <div class="question-section">
                    <div class="question-text">${question.question}</div>
                    <div class="answers" id="answers">
                        ${answerButtons}
                    </div>
                    <div class="feedback" id="feedback"></div>
                </div>
                
                <div id="continue-container"></div>
                <button class="back-btn" onclick="closeModal()">‚úï BACK</button>
                <div style="clear:both;"></div>
            `;
            
            modal.classList.add('active');
        }
        
        function checkAnswer(idx) {
            const question = window.currentQuestion;
            const answer = question.answers[idx];
            
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => btn.classList.add('disabled'));
            
            const clickedBtn = buttons[idx];
            const feedback = document.getElementById('feedback');
            
            if (answer.correct) {
                clickedBtn.classList.add('correct');
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úì CORRECT! ' + answer.feedback;
                gameState.correctAnswers++;
            } else {
                clickedBtn.classList.add('incorrect');
                feedback.className = 'feedback incorrect';
                feedback.textContent = '‚úó ' + answer.feedback;
            }
            
            const continueContainer = document.getElementById('continue-container');
            continueContainer.innerHTML = '<button class="continue-btn" onclick="nextQuestion()">CONTINUE ‚Üí</button>';
        }
        
        function nextQuestion() {
            gameState.currentQuestion++;
            const lesson = gameState.currentLesson.lessons[0];
            
            if (gameState.currentQuestion < lesson.questions.length) {
                showQuestion(lesson.questions[gameState.currentQuestion]);
            } else {
                completeSkill();
            }
        }
        
        function completeSkill() {
            const skill = gameState.currentLesson;
            const xpEarned = skill.xp;
            const questionsTotal = skill.lessons[0].questions.length;
            const score = Math.round((gameState.correctAnswers / questionsTotal) * 100);
            
            gameState.xp += xpEarned;
            gameState.totalXp += xpEarned;
            
            while (gameState.xp >= gameState.xpToNextLevel) {
                gameState.xp -= gameState.xpToNextLevel;
                gameState.level++;
                gameState.xpToNextLevel = Math.floor(gameState.xpToNextLevel * 1.5);
            }
            
            if (!gameState.skillProgress[skill.id]) {
                gameState.skillProgress[skill.id] = 0;
            }
            gameState.skillProgress[skill.id]++;
            
            if (!gameState.completedSkills.includes(skill.id)) {
                gameState.completedSkills.push(skill.id);
                gameState.streak++;
            }
            
            const modal = document.getElementById('modal');
            const content = document.getElementById('modal-content');
            
            // Find next available skill
            const currentIndex = skillTree.findIndex(s => s.id === skill.id);
            const nextSkill = skillTree.slice(currentIndex + 1).find(s => {
                if (!s.prereq) return true;
                return gameState.completedSkills.includes(s.prereq);
            });
            
            const nextSkillButton = nextSkill && !gameState.completedSkills.includes(nextSkill.id)
                ? `<button class="next-skill-btn" onclick="startNextSkill('${nextSkill.id}')">‚Üí NEXT: ${nextSkill.title}</button>`
                : '';
            
            content.innerHTML = `
                <div class="completion-screen">
                    <div class="completion-icon">${skill.icon}</div>
                    <div class="completion-title">SKILL MASTERED!</div>
                    <div class="xp-earned">+${xpEarned} XP EARNED</div>
                    <div class="teaching-text">
                        Score: ${score}% (${gameState.correctAnswers}/${questionsTotal} correct)<br><br>
                        You've completed "${skill.title}"<br><br>
                        Reclaiming your authentic self!
                    </div>
                    ${nextSkillButton}
                    <button class="continue-btn" onclick="closeModalAndRefresh()">BACK TO SKILL TREE ‚Üí</button>
                </div>
            `;
            
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
            
            saveProgress();
        }
        
        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }
        
        function closeModalAndRefresh() {
            closeModal();
            initSkillTree();
        }
        
        function saveProgress() {
            localStorage.setItem('giftedChildAcademy', JSON.stringify(gameState));
        }
        
        function loadProgress() {
            const saved = localStorage.getItem('giftedChildAcademy');
            if (saved) {
                gameState = JSON.parse(saved);
                initSkillTree();
                alert('‚úì Progress loaded!');
            } else {
                alert('No saved progress found.');
            }
        }
        
        function resetProgress() {
            if (confirm('Reset all progress? This cannot be undone.')) {
                localStorage.removeItem('giftedChildAcademy');
                location.reload();
            }
        }
        
        function startNextSkill(skillId) {
            const skill = skillTree.find(s => s.id === skillId);
            if (skill) {
                closeModal();
                setTimeout(() => startSkill(skill), 300);
            }
        }
        
        initSkillTree();
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            const modal = document.getElementById('modal');
            const isModalOpen = modal.classList.contains('active');
            
            // ESC to close modal
            if (e.key === 'Escape' && isModalOpen) {
                closeModal();
            }
            
            // H to go home (when modal is closed)
            if (e.key === 'h' && !isModalOpen) {
                window.location.href = 'learning-library-hub.html';
            }
            
            // S to save progress (when modal is closed)
            if (e.key === 's' && !isModalOpen) {
                e.preventDefault();
                saveProgress();
                alert('üíæ Progress saved!');
            }
        });
        
        // Make answer buttons keyboard accessible
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('answer-btn')) {
                e.target.focus();
            }
        });
        
        console.log('%cüé≠ GIFTED CHILD ACADEMY LOADED', 'color: #fa0; font-size: 16px; font-weight: bold;');
        console.log('%c‚å®Ô∏è  Keyboard Shortcuts:', 'color: #fc0; font-size: 12px;');
        console.log('  ‚Ä¢ ESC - Close modal');
        console.log('  ‚Ä¢ H - Return to home');
        console.log('  ‚Ä¢ S - Save progress');
        console.log('  ‚Ä¢ TAB - Navigate skills');
        console.log('  ‚Ä¢ ENTER - Start selected skill');
    </script>
</body>
</html>
